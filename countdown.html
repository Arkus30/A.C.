<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Transmission en attente</title>

<style>
body {
    margin:0;
    height:100vh;
    background: radial-gradient(circle at center, #400000 0%, #000 70%);
    color:white;
    font-family:"Consolas", monospace;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
    text-align:center;
    animation: pulseImperial 6s ease-in-out infinite;
}

/* Pulsation lente du fond */
@keyframes pulseImperial {
    0% { background: radial-gradient(circle at center, #350000 0%, #000 70%); }
    50% { background: radial-gradient(circle at center, #600000 0%, #000 75%); }
    100% { background: radial-gradient(circle at center, #350000 0%, #000 70%); }
}

.container { z-index:2; }

.label {
    letter-spacing:4px;
    font-size:14px;
    color:gold;
    margin-bottom:20px;
}

#countdown {
    font-size:42px;
    letter-spacing:4px;
    margin-top:20px;
    text-shadow: 0 0 5px white;
    transition: all 0.5s ease;
}

/* Mode derniÃ¨re heure */
.lastHour {
    color:red !important;
    text-shadow: 0 0 15px red, 0 0 30px darkred;
    animation: pulseCritical 2s ease-in-out infinite;
}

@keyframes pulseCritical {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

button {
    padding:12px 35px;
    background:black;
    color:gold;
    border:2px solid darkred;
    font-size:16px;
    letter-spacing:2px;
    cursor:pointer;
}

button:hover { background:#220000; }

#sync {
    margin-top:20px;
    color:gold;
    font-size:14px;
    display:none;
}
</style>
</head>

<body>

<div class="container">

    <div id="initScreen">
        <button onclick="startCountdown()">INITIALISER COMPTE Ã€ REBOURS</button>
        <div id="sync">Synchronisation du canal...</div>
    </div>

    <div id="countdownScreen" style="display:none;">
        <div class="label">TRANSMISSION PROGRAMMÃ‰E</div>
        <div id="countdown">--J --H --M --S</div>
    </div>

</div>

<audio id="normalMusic" src="countdown_ambience.mp3" loop></audio>
<audio id="criticalMusic" src="countdown_critical.mp3" loop></audio>

<script>

// =============================
// ðŸ”§ DATE CIBLE
// =============================

// ðŸŽ¯ DATE OFFICIELLE
//let dateCible = new Date("2026-06-01T20:00:00").getTime();

// =============================
// ðŸ§ª MODE TEST (dÃ©commente pour test rapide)
// =============================
let dateCible = new Date().getTime() + (65 * 60 * 1000); // 2 minutes
// let dateCible = new Date().getTime() + (30 * 1000); // 30 secondes

// =============================

const normalMusic = document.getElementById("normalMusic");
const criticalMusic = document.getElementById("criticalMusic");

normalMusic.volume = 0.25;
criticalMusic.volume = 0.35;

let intervalID;
let criticalTriggered = false;

function startCountdown() {
    document.getElementById("sync").style.display = "block";

    normalMusic.play().catch(()=>{});

    setTimeout(() => {
        document.getElementById("initScreen").style.display = "none";
        document.getElementById("countdownScreen").style.display = "block";
        lancerCompte();
    }, 2000);
}

function lancerCompte() {

    intervalID = setInterval(() => {

        const maintenant = new Date().getTime();
        const distance = dateCible - maintenant;

        if (distance <= 0) {
            clearInterval(intervalID);
            document.getElementById("countdown").innerHTML =
                "TRANSMISSION OUVERTE";
            normalMusic.pause();
            criticalMusic.pause();
            return;
        }

        // ðŸ”¥ ACTIVATION DERNIÃˆRE HEURE
        if (distance <= 3600000 && !criticalTriggered) {
            criticalTriggered = true;

            document.getElementById("countdown").classList.add("lastHour");

            normalMusic.pause();
            criticalMusic.currentTime = 0;
            criticalMusic.play().catch(()=>{});
        }

        const j = Math.floor(distance / (1000 * 60 * 60 * 24));
        const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const s = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById("countdown").innerHTML =
            j + "J " + h + "H " + m + "M " + s + "S";

    }, 1000);
}
</script>

</body>
</html>
