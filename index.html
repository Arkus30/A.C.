<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Transmission Interceptée</title>

<style>
body {
    margin:0;
    background: radial-gradient(circle at center, #0a0f14 0%, #000 80%);
    color: #cfcfcf;
    font-family: "Consolas", monospace;
    text-align: center;
    padding: 40px;
    overflow-x: hidden;
}

/* Effet terminal */
body::before {
    content: "";
    position: fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.02),
        rgba(255,255,255,0.02) 2px,
        transparent 2px,
        transparent 4px
    );
    animation: flicker 0.15s infinite;
}

@keyframes flicker {
    0% {opacity:0.95;}
    50% {opacity:1;}
    100% {opacity:0.97;}
}

.container {
    max-width: 900px;
    margin: auto;
}

h1 {
    font-size: 22px;
    letter-spacing: 4px;
    margin-bottom: 30px;
    color: #6fd3ff;
}

.message {
    font-size: 14px;
    line-height: 1.7;
    margin-bottom: 40px;
    opacity: 0.85;
}

.symbols {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 15px;
    margin-bottom: 30px;
}

.symbols img {
    width: 100%;
    cursor: pointer;
    border: 1px solid #333;
    background: #0a0a0a;
    padding: 10px;
    transition: transform 0.1s, border 0.2s;
}

.symbols img:hover {
    transform: scale(1.05);
    border: 1px solid #6fd3ff;
}

.slots {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 25px;
}

.slot {
    width: 60px;
    height: 60px;
    border: 1px solid #444;
    background: #000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.slot img {
    max-width: 100%;
    max-height: 100%;
}

button {
    margin-top: 15px;
    padding: 10px 25px;
    background: #111;
    color: #cfcfcf;
    border: 1px solid #444;
    cursor: pointer;
    letter-spacing: 1px;
}

button:hover {
    background: #1a1a1a;
}

#result {
    margin-top: 30px;
    font-size: 16px;
    opacity: 0.9;
    color: #6fd3ff;
}
</style>
</head>

<body>
<div class="container">

<h1>TRANSMISSION INTERCEPTÉE</h1>

<div class="message">
Ce message n’a pas d’auteur.<br><br>
Il a une origine.<br><br>
Nous ne nommons pas les individus.<br>
Nous identifions les points de convergence.<br><br>
Cherchez ce qui n’est ni un titre,<br>
ni une fonction,<br>
mais un centre autour duquel l’ordre s’organise.<br><br>
Traduisez.<br>
Assemblez.<br>
Entrez ce qui demeure lorsque tout le reste disparaît.
</div>

<div class="symbols">
    <img src="Image1.png" onclick="ajouter('A','Image1.png')">
    <img src="Image2.png" onclick="ajouter('R','Image2.png')">
    <img src="Image3.png" onclick="ajouter('K','Image3.png')">
    <img src="Image4.png" onclick="ajouter('U','Image4.png')">
    <img src="Image5.png" onclick="ajouter('S','Image5.png')">
</div>

<div class="slots">
    <div class="slot"></div>
    <div class="slot"></div>
    <div class="slot"></div>
    <div class="slot"></div>
    <div class="slot"></div>
</div>

<button id="resetBtn" onclick="reset()">RÉINITIALISER</button>

<div id="result"></div>

<audio id="bgMusic" src="ambience.mp3" loop></audio>

<script>
let selection = [];
let locked = false;
let musicStarted = false;

const bgMusic = document.getElementById("bgMusic");
const soundClick = new Audio("click.mp3");
const soundFalse = new Audio("error.mp3");
const soundTrue = new Audio("success.mp3");

bgMusic.volume = 0.25; // ambiance plus douce

function startMusic() {
    if (!musicStarted) {
        bgMusic.play().catch(()=>{});
        musicStarted = true;
    }
}

function ajouter(valeur, image) {
    if (locked || selection.length >= 5) return;

    startMusic();

    soundClick.currentTime = 0;
    soundClick.volume = 0.6;
    soundClick.play().catch(()=>{});

    selection.push(valeur);

    const slot = document.getElementsByClassName("slot")[selection.length - 1];
    const img = document.createElement("img");
    img.src = image;
    slot.appendChild(img);

    if (selection.length === 5) verifier();
}

function verifier() {
    const code = selection.join("");

    if (code === "ARKUS") {
        locked = true;
        document.getElementById("resetBtn").style.display = "none";
        document.getElementById("result").innerText = "CANAL VALIDÉ";

        fadeMusic(0.05, 500); // baisse ambiance

        soundTrue.volume = 1;
        soundTrue.play().catch(()=>{});

        soundTrue.onended = function() {
            window.location.href = "countdown.html";
        };

    } else {
        soundFalse.volume = 0.8;
        soundFalse.play().catch(()=>{});
        document.getElementById("result").innerText =
            "Aucune correspondance valide.";
    }
}

function reset() {
    if (locked) return;

    selection = [];
    document.getElementById("result").innerText = "";

    const slots = document.getElementsByClassName("slot");
    for (let s of slots) s.innerHTML = "";
}

function fadeMusic(target, duration) {
    let step = 0.01;
    let interval = duration / ((bgMusic.volume - target) / step);

    let fade = setInterval(() => {
        if (bgMusic.volume > target) {
            bgMusic.volume = Math.max(bgMusic.volume - step, target);
        } else {
            clearInterval(fade);
        }
    }, interval);
}
</script>

</div>
</body>
</html>
